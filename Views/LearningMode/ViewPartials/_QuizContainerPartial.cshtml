@using QuizletClone.ViewModels.LearningMode
@using Newtonsoft.Json

@model QuizContainerViewModel

<div class="quiz-container">
	<div class="quiz-wrapper slide-in-right">
		@* <article class="quiz-card">
			<div class="quiz-header">
				<div class="quiz-card-header-top">
					<div class="quiz-card-title">
						<span>Định nghĩa</span>
					</div>
				</div>

				<div class="quiz-definition-text">
					<span>Question</span> <!-- Thay bằng nội dung câu hỏi động -->
				</div>
			</div>

			<div class="quiz-answer-section multiple-choice-quiz">
				<div class="quiz-card-title">
					<span>Chọn thuật ngữ đúng</span>
				</div>

				<div class="quiz-card-answers">
					<!-- Chèn đáp án tại đây, ví dụ: -->
					<div class="quiz-answer" data-correct="true" onclick="checkAnswer(this)">
						<div class="quiz-answer-no">1</div>
						<div class="quiz-answer-text">Đáp án A</div>
					</div>

					<div class="quiz-answer" data-correct="false" onclick="checkAnswer(this)">
						<div class="quiz-answer-no">2</div>
						<div class="quiz-answer-text">Đáp án B</div>
					</div>

					<div class="quiz-answer" data-correct="false" onclick="checkAnswer(this)">
						<div class="quiz-answer-no">3</div>
						<div class="quiz-answer-text">Đáp án C</div>
					</div>

					<div class="quiz-answer" data-correct="false" onclick="checkAnswer(this)">
						<div class="quiz-answer-no">4</div>
						<div class="quiz-answer-text">Đáp án D</div>
					</div>
					<!-- Tiếp tục với các đáp án khác -->
				</div>

				<div class="quiz-card-help">
					<i class="fa-regular fa-flag btn-report"></i>
					<button class="quiz-help-button" onclick="showCorrectAnswer()">Bạn không biết?</button>
				</div>
			</div>
		</article> *@
	</div>
</div>

<script>
	// Serialize danh sách AllQuestions sang JSON để dùng bên JavaScript.
	// Cấu hình JsonSerializerSettings để:
	// - TypeNameHandling.Auto: thêm thông tin kiểu thực tế (giúp phân biệt các lớp kế thừa như MultipleChoiceQuestionDTO)
	// - StringEnumConverter: chuyển enum (QuestionType) thành chuỗi thay vì số (e.g., "Multiple" thay vì 1)
	window.allQuestions = @Html.Raw(JsonConvert.SerializeObject(Model.AllQuestions, new JsonSerializerSettings {
		TypeNameHandling = TypeNameHandling.Auto,
		Converters = new List<JsonConverter> { new Newtonsoft.Json.Converters.StringEnumConverter() }
	}))
</script>